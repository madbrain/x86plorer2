var cn=Object.defineProperty;var dn=(e,t,r)=>t in e?cn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var H=(e,t,r)=>dn(e,typeof t!="symbol"?t+"":t,r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();const vn=!1;var kt=Array.isArray,At=Array.from,hn=Object.defineProperty,pe=Object.getOwnPropertyDescriptor,_n=Object.getOwnPropertyDescriptors,mn=Object.prototype,gn=Array.prototype,yr=Object.getPrototypeOf;function pn(e){return e()}function ht(e){for(var t=0;t<e.length;t++)e[t]()}const F=2,Rr=4,nt=8,It=16,q=32,ze=64,_t=128,ce=256,je=512,$=1024,se=2048,Oe=4096,Y=8192,we=16384,En=32768,Dt=65536,Sn=1<<17,bn=1<<19,Or=1<<20,le=Symbol("$state"),yn=Symbol("legacy props");function wr(e){return e===this.v}function Rn(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Tt(e){return!Rn(e,this.v)}function On(e){throw new Error("effect_in_teardown")}function wn(){throw new Error("effect_in_unowned_derived")}function Mn(e){throw new Error("effect_orphan")}function kn(){throw new Error("effect_update_depth_exceeded")}function An(e){throw new Error("props_invalid_value")}function In(){throw new Error("state_descriptors_fixed")}function Dn(){throw new Error("state_prototype_fixed")}function Tn(){throw new Error("state_unsafe_local_read")}function Nn(){throw new Error("state_unsafe_mutation")}let Me=!1;function Ln(){Me=!0}function V(e){return{f:0,v:e,reactions:null,equals:wr,version:0}}function ot(e){return Mr(V(e))}function Nt(e,t=!1){var n;const r=V(e);return t||(r.equals=Tt),Me&&D!==null&&D.l!==null&&((n=D.l).s??(n.s=[])).push(r),r}function xn(e,t=!1){return Mr(Nt(e,t))}function Mr(e){return I!==null&&I.f&F&&(W===null?ui([e]):W.push(e)),e}function z(e,t){return I!==null&&st()&&I.f&(F|It)&&(W===null||!W.includes(e))&&Nn(),kr(e,t)}function kr(e,t){return e.equals(t)||(e.v=t,e.version=Gr(),Ar(e,se),st()&&y!==null&&y.f&$&&!(y.f&q)&&(B!==null&&B.includes(e)?(Z(y,se),ut(y)):re===null?oi([e]):re.push(e))),t}function Ar(e,t){var r=e.reactions;if(r!==null)for(var n=st(),i=r.length,s=0;s<i;s++){var u=r[s],c=u.f;c&se||!n&&u===y||(Z(u,t),c&($|ce)&&(c&F?Ar(u,Oe):ut(u)))}}const Pn=1,Bn=2,Cn=16,zn=1,$n=2,Un=4,Xn=8,Vn=16,Gn=1,Fn=2,U=Symbol();let qn=!1;function te(e,t=null,r){if(typeof e!="object"||e===null||le in e)return e;const n=yr(e);if(n!==mn&&n!==gn)return e;var i=new Map,s=kt(e),u=V(0);s&&i.set("length",V(e.length));var c;return new Proxy(e,{defineProperty(l,a,o){(!("value"in o)||o.configurable===!1||o.enumerable===!1||o.writable===!1)&&In();var f=i.get(a);return f===void 0?(f=V(o.value),i.set(a,f)):z(f,te(o.value,c)),!0},deleteProperty(l,a){var o=i.get(a);if(o===void 0)a in l&&i.set(a,V(U));else{if(s&&typeof a=="string"){var f=i.get("length"),d=Number(a);Number.isInteger(d)&&d<f.v&&z(f,d)}z(o,U),Yt(u)}return!0},get(l,a,o){var S;if(a===le)return e;var f=i.get(a),d=a in l;if(f===void 0&&(!d||(S=pe(l,a))!=null&&S.writable)&&(f=V(te(d?l[a]:U,c)),i.set(a,f)),f!==void 0){var g=A(f);return g===U?void 0:g}return Reflect.get(l,a,o)},getOwnPropertyDescriptor(l,a){var o=Reflect.getOwnPropertyDescriptor(l,a);if(o&&"value"in o){var f=i.get(a);f&&(o.value=A(f))}else if(o===void 0){var d=i.get(a),g=d==null?void 0:d.v;if(d!==void 0&&g!==U)return{enumerable:!0,configurable:!0,value:g,writable:!0}}return o},has(l,a){var g;if(a===le)return!0;var o=i.get(a),f=o!==void 0&&o.v!==U||Reflect.has(l,a);if(o!==void 0||y!==null&&(!f||(g=pe(l,a))!=null&&g.writable)){o===void 0&&(o=V(f?te(l[a],c):U),i.set(a,o));var d=A(o);if(d===U)return!1}return f},set(l,a,o,f){var b;var d=i.get(a),g=a in l;if(s&&a==="length")for(var S=o;S<d.v;S+=1){var O=i.get(S+"");O!==void 0?z(O,U):S in l&&(O=V(U),i.set(S+"",O))}d===void 0?(!g||(b=pe(l,a))!=null&&b.writable)&&(d=V(void 0),z(d,te(o,c)),i.set(a,d)):(g=d.v!==U,z(d,te(o,c)));var M=Reflect.getOwnPropertyDescriptor(l,a);if(M!=null&&M.set&&M.set.call(f,o),!g){if(s&&typeof a=="string"){var p=i.get("length"),E=Number(a);Number.isInteger(E)&&E>=p.v&&z(p,E+1)}Yt(u)}return!0},ownKeys(l){A(u);var a=Reflect.ownKeys(l).filter(d=>{var g=i.get(d);return g===void 0||g.v!==U});for(var[o,f]of i)f.v!==U&&!(o in l)&&a.push(o);return a},setPrototypeOf(){Dn()}})}function Yt(e,t=1){z(e,e.v+t)}var Wt,Ir,Dr;function Hn(){if(Wt===void 0){Wt=window;var e=Element.prototype,t=Node.prototype;Ir=pe(t,"firstChild").get,Dr=pe(t,"nextSibling").get,e.__click=void 0,e.__className="",e.__attributes=null,e.__styles=null,e.__e=void 0,Text.prototype.__t=void 0}}function Tr(e=""){return document.createTextNode(e)}function Ze(e){return Ir.call(e)}function it(e){return Dr.call(e)}function G(e,t){return Ze(e)}function Kn(e,t){{var r=Ze(e);return r instanceof Comment&&r.data===""?it(r):r}}function J(e,t=1,r=!1){let n=e;for(;t--;)n=it(n);return n}function Yn(e){e.textContent=""}function xe(e){var t=F|se;y===null?t|=ce:y.f|=Or;var r=I!==null&&I.f&F?I:null;const n={children:null,ctx:D,deps:null,equals:wr,f:t,fn:e,reactions:null,v:null,version:0,parent:r??y};return r!==null&&(r.children??(r.children=[])).push(n),n}function Wn(e){const t=xe(e);return t.equals=Tt,t}function Nr(e){var t=e.children;if(t!==null){e.children=null;for(var r=0;r<t.length;r+=1){var n=t[r];n.f&F?Lt(n):de(n)}}}function jn(e){for(var t=e.parent;t!==null;){if(!(t.f&F))return t;t=t.parent}return null}function Lr(e){var t,r=y;j(jn(e));try{Nr(e),t=Fr(e)}finally{j(r)}return t}function xr(e){var t=Lr(e),r=(me||e.f&ce)&&e.deps!==null?Oe:$;Z(e,r),e.equals(t)||(e.v=t,e.version=Gr())}function Lt(e){Nr(e),Be(e,0),Z(e,we),e.v=e.children=e.deps=e.ctx=e.reactions=null}function Pr(e){y===null&&I===null&&Mn(),I!==null&&I.f&ce&&wn(),Ct&&On()}function Zn(e,t){var r=t.last;r===null?t.last=t.first=e:(r.next=e,e.prev=r,t.last=e)}function $e(e,t,r,n=!0){var i=(e&ze)!==0,s=y,u={ctx:D,deps:null,deriveds:null,nodes_start:null,nodes_end:null,f:e|se,first:null,fn:t,last:null,next:null,parent:i?null:s,prev:null,teardown:null,transitions:null,version:0};if(r){var c=Ee;try{jt(!0),Ue(u),u.f|=En}catch(o){throw de(u),o}finally{jt(c)}}else t!==null&&ut(u);var l=r&&u.deps===null&&u.first===null&&u.nodes_start===null&&u.teardown===null&&(u.f&Or)===0;if(!l&&!i&&n&&(s!==null&&Zn(u,s),I!==null&&I.f&F)){var a=I;(a.children??(a.children=[])).push(u)}return u}function mt(e){Pr();var t=y!==null&&(y.f&q)!==0&&D!==null&&!D.m;if(t){var r=D;(r.e??(r.e=[])).push({fn:e,effect:y,reaction:I})}else{var n=xt(e);return n}}function Jn(e){return Pr(),ke(e)}function Qn(e){const t=$e(ze,e,!0);return()=>{de(t)}}function xt(e){return $e(Rr,e,!1)}function ei(e,t){var r=D,n={effect:null,ran:!1};r.l.r1.push(n),n.effect=ke(()=>{e(),!n.ran&&(n.ran=!0,z(r.l.r2,!0),ye(t))})}function ti(){var e=D;ke(()=>{if(A(e.l.r2)){for(var t of e.l.r1){var r=t.effect;r.f&$&&Z(r,Oe),Ae(r)&&Ue(r),t.ran=!1}e.l.r2.v=!1}})}function ke(e){return $e(nt,e,!0)}function gt(e){return Pt(e)}function Pt(e,t=0){return $e(nt|It|t,e,!0)}function Pe(e,t=!0){return $e(nt|q,e,!0,t)}function Br(e){var t=e.teardown;if(t!==null){const r=Ct,n=I;Zt(!0),ue(null);try{t.call(null)}finally{Zt(r),ue(n)}}}function Cr(e){var t=e.deriveds;if(t!==null){e.deriveds=null;for(var r=0;r<t.length;r+=1)Lt(t[r])}}function zr(e,t=!1){var r=e.first;for(e.first=e.last=null;r!==null;){var n=r.next;de(r,t),r=n}}function ri(e){for(var t=e.first;t!==null;){var r=t.next;t.f&q||de(t),t=r}}function de(e,t=!0){var r=!1;if((t||e.f&bn)&&e.nodes_start!==null){for(var n=e.nodes_start,i=e.nodes_end;n!==null;){var s=n===i?null:it(n);n.remove(),n=s}r=!0}zr(e,t&&!r),Cr(e),Be(e,0),Z(e,we);var u=e.transitions;if(u!==null)for(const l of u)l.stop();Br(e);var c=e.parent;c!==null&&c.first!==null&&$r(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=null}function $r(e){var t=e.parent,r=e.prev,n=e.next;r!==null&&(r.next=n),n!==null&&(n.prev=r),t!==null&&(t.first===e&&(t.first=n),t.last===e&&(t.last=r))}function pt(e,t){var r=[];Bt(e,r,!0),Ur(r,()=>{de(e),t&&t()})}function Ur(e,t){var r=e.length;if(r>0){var n=()=>--r||t();for(var i of e)i.out(n)}else t()}function Bt(e,t,r){if(!(e.f&Y)){if(e.f^=Y,e.transitions!==null)for(const u of e.transitions)(u.is_global||r)&&t.push(u);for(var n=e.first;n!==null;){var i=n.next,s=(n.f&Dt)!==0||(n.f&q)!==0;Bt(n,t,s?r:!1),n=i}}}function Je(e){Xr(e,!0)}function Xr(e,t){if(e.f&Y){Ae(e)&&Ue(e),e.f^=Y;for(var r=e.first;r!==null;){var n=r.next,i=(r.f&Dt)!==0||(r.f&q)!==0;Xr(r,i?t:!1),r=n}if(e.transitions!==null)for(const s of e.transitions)(s.is_global||t)&&s.in()}}let Et=!1,St=[];function ni(){Et=!1;const e=St.slice();St=[],ht(e)}function ii(e){Et||(Et=!0,queueMicrotask(ni)),St.push(e)}function si(e){throw new Error("lifecycle_outside_component")}let Ye=!1,Qe=!1,Ee=!1,Ct=!1;function jt(e){Ee=e}function Zt(e){Ct=e}let bt=[],Te=0;let I=null;function ue(e){I=e}let y=null;function j(e){y=e}let W=null;function ui(e){W=e}let B=null,X=0,re=null;function oi(e){re=e}let Vr=0,me=!1,D=null;function Gr(){return++Vr}function st(){return!Me||D!==null&&D.l===null}function Ae(e){var u,c;var t=e.f;if(t&se)return!0;if(t&Oe){var r=e.deps,n=(t&ce)!==0;if(r!==null){var i;if(t&je){for(i=0;i<r.length;i++)((u=r[i]).reactions??(u.reactions=[])).push(e);e.f^=je}for(i=0;i<r.length;i++){var s=r[i];if(Ae(s)&&xr(s),n&&y!==null&&!me&&!((c=s==null?void 0:s.reactions)!=null&&c.includes(e))&&(s.reactions??(s.reactions=[])).push(e),s.version>e.version)return!0}}n||Z(e,$)}return!1}function ai(e,t){for(var r=t;r!==null;){if(r.f&_t)try{r.fn(e);return}catch{r.f^=_t}r=r.parent}throw Ye=!1,e}function li(e){return(e.f&we)===0&&(e.parent===null||(e.parent.f&_t)===0)}function zt(e,t,r,n){if(Ye){if(r===null&&(Ye=!1),li(t))throw e;return}r!==null&&(Ye=!0);{ai(e,t);return}}function Fr(e){var d;var t=B,r=X,n=re,i=I,s=me,u=W,c=D,l=e.f;B=null,X=0,re=null,I=l&(q|ze)?null:e,me=!Ee&&(l&ce)!==0,W=null,D=e.ctx;try{var a=(0,e.fn)(),o=e.deps;if(B!==null){var f;if(Be(e,X),o!==null&&X>0)for(o.length=X+B.length,f=0;f<B.length;f++)o[X+f]=B[f];else e.deps=o=B;if(!me)for(f=X;f<o.length;f++)((d=o[f]).reactions??(d.reactions=[])).push(e)}else o!==null&&X<o.length&&(Be(e,X),o.length=X);return a}finally{B=t,X=r,re=n,I=i,me=s,W=u,D=c}}function fi(e,t){let r=t.reactions;if(r!==null){var n=r.indexOf(e);if(n!==-1){var i=r.length-1;i===0?r=t.reactions=null:(r[n]=r[i],r.pop())}}r===null&&t.f&F&&(B===null||!B.includes(t))&&(Z(t,Oe),t.f&(ce|je)||(t.f^=je),Be(t,0))}function Be(e,t){var r=e.deps;if(r!==null)for(var n=t;n<r.length;n++)fi(e,r[n])}function Ue(e){var t=e.f;if(!(t&we)){Z(e,$);var r=y,n=D;y=e;try{t&It?ri(e):zr(e),Cr(e),Br(e);var i=Fr(e);e.teardown=typeof i=="function"?i:null,e.version=Vr}catch(s){zt(s,e,r,n||e.ctx)}finally{y=r}}}function ci(){Te>1e3&&(Te=0,kn()),Te++}function di(e){var t=e.length;if(t!==0){ci();var r=Ee;Ee=!0;try{for(var n=0;n<t;n++){var i=e[n];i.f&$||(i.f^=$);var s=[];qr(i,s),vi(s)}}finally{Ee=r}}}function vi(e){var t=e.length;if(t!==0)for(var r=0;r<t;r++){var n=e[r];if(!(n.f&(we|Y)))try{Ae(n)&&(Ue(n),n.deps===null&&n.first===null&&n.nodes_start===null&&(n.teardown===null?$r(n):n.fn=null))}catch(i){zt(i,n,null,n.ctx)}}}function hi(){if(Qe=!1,Te>1001)return;const e=bt;bt=[],di(e),Qe||(Te=0)}function ut(e){Qe||(Qe=!0,queueMicrotask(hi));for(var t=e;t.parent!==null;){t=t.parent;var r=t.f;if(r&(ze|q)){if(!(r&$))return;t.f^=$}}bt.push(t)}function qr(e,t){var r=e.first,n=[];e:for(;r!==null;){var i=r.f,s=(i&q)!==0,u=s&&(i&$)!==0,c=r.next;if(!u&&!(i&Y))if(i&nt){if(s)r.f^=$;else try{Ae(r)&&Ue(r)}catch(f){zt(f,r,null,r.ctx)}var l=r.first;if(l!==null){r=l;continue}}else i&Rr&&n.push(r);if(c===null){let f=r.parent;for(;f!==null;){if(e===f)break e;var a=f.next;if(a!==null){r=a;continue e}f=f.parent}}r=c}for(var o=0;o<n.length;o++)l=n[o],t.push(l),qr(l,t)}function A(e){var o;var t=e.f,r=(t&F)!==0;if(r&&t&we){var n=Lr(e);return Lt(e),n}if(I!==null){W!==null&&W.includes(e)&&Tn();var i=I.deps;B===null&&i!==null&&i[X]===e?X++:B===null?B=[e]:B.push(e),re!==null&&y!==null&&y.f&$&&!(y.f&q)&&re.includes(e)&&(Z(y,se),ut(y))}else if(r&&e.deps===null)for(var s=e,u=s.parent,c=s;u!==null;)if(u.f&F){var l=u;c=l,u=l.parent}else{var a=u;(o=a.deriveds)!=null&&o.includes(c)||(a.deriveds??(a.deriveds=[])).push(c);break}return r&&(s=e,Ae(s)&&xr(s)),e.v}function ye(e){const t=I;try{return I=null,e()}finally{I=t}}const _i=~(se|Oe|$);function Z(e,t){e.f=e.f&_i|t}function $t(e,t=!1,r){D={p:D,c:null,e:null,m:!1,s:e,x:null,l:null},Me&&!t&&(D.l={s:null,u:null,r1:[],r2:V(!1)})}function Ut(e){const t=D;if(t!==null){const u=t.e;if(u!==null){var r=y,n=I;t.e=null;try{for(var i=0;i<u.length;i++){var s=u[i];j(s.effect),ue(s.reaction),xt(s.fn)}}finally{j(r),ue(n)}}D=t.p,t.m=!0}return{}}function Hr(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(le in e)yt(e);else if(!Array.isArray(e))for(let t in e){const r=e[t];typeof r=="object"&&r&&le in r&&yt(r)}}}function yt(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let n in e)try{yt(e[n],t)}catch{}const r=yr(e);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const n=_n(r);for(let i in n){const s=n[i].get;if(s)try{s.call(e)}catch{}}}}}let Jt=!1;function mi(){Jt||(Jt=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const r of e.target.elements)(t=r.__on_r)==null||t.call(r)})},{capture:!0}))}function gi(e){var t=I,r=y;ue(null),j(null);try{return e()}finally{ue(t),j(r)}}function Kr(e,t,r,n=r){e.addEventListener(t,()=>gi(r));const i=e.__on_r;i?e.__on_r=()=>{i(),n()}:e.__on_r=n,mi()}const pi=new Set,Qt=new Set;function Ve(e){var E;var t=this,r=t.ownerDocument,n=e.type,i=((E=e.composedPath)==null?void 0:E.call(e))||[],s=i[0]||e.target,u=0,c=e.__root;if(c){var l=i.indexOf(c);if(l!==-1&&(t===document||t===window)){e.__root=t;return}var a=i.indexOf(t);if(a===-1)return;l<=a&&(u=l)}if(s=i[u]||e.target,s!==t){hn(e,"currentTarget",{configurable:!0,get(){return s||r}});var o=I,f=y;ue(null),j(null);try{for(var d,g=[];s!==null;){var S=s.assignedSlot||s.parentNode||s.host||null;try{var O=s["__"+n];if(O!==void 0&&!s.disabled)if(kt(O)){var[M,...p]=O;M.apply(s,[e,...p])}else O.call(s,e)}catch(b){d?g.push(b):d=b}if(e.cancelBubble||S===t||S===null)break;s=S}if(d){for(let b of g)queueMicrotask(()=>{throw b});throw d}}finally{e.__root=t,delete e.currentTarget,ue(o),j(f)}}}function Ei(e){var t=document.createElement("template");return t.innerHTML=e,t.content}function er(e,t){var r=y;r.nodes_start===null&&(r.nodes_start=e,r.nodes_end=t)}function Xe(e,t){var r=(t&Gn)!==0,n=(t&Fn)!==0,i,s=!e.startsWith("<!>");return()=>{i===void 0&&(i=Ei(s?e:"<!>"+e),r||(i=Ze(i)));var u=n?document.importNode(i,!0):i.cloneNode(!0);if(r){var c=Ze(u),l=u.lastChild;er(c,l)}else er(u,u);return u}}function Ne(e,t){e!==null&&e.before(t)}const Si=["touchstart","touchmove"];function bi(e){return Si.includes(e)}function et(e,t){var r=t==null?"":typeof t=="object"?t+"":t;r!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=r,e.nodeValue=r==null?"":r+"")}function yi(e,t){return Ri(e,t)}const ve=new Map;function Ri(e,{target:t,anchor:r,props:n={},events:i,context:s,intro:u=!0}){Hn();var c=new Set,l=f=>{for(var d=0;d<f.length;d++){var g=f[d];if(!c.has(g)){c.add(g);var S=bi(g);t.addEventListener(g,Ve,{passive:S});var O=ve.get(g);O===void 0?(document.addEventListener(g,Ve,{passive:S}),ve.set(g,1)):ve.set(g,O+1)}}};l(At(pi)),Qt.add(l);var a=void 0,o=Qn(()=>{var f=r??t.appendChild(Tr());return Pe(()=>{if(s){$t({});var d=D;d.c=s}i&&(n.$$events=i),a=e(f,n)||{},s&&Ut()}),()=>{var S;for(var d of c){t.removeEventListener(d,Ve);var g=ve.get(d);--g===0?(document.removeEventListener(d,Ve),ve.delete(d)):ve.set(d,g)}Qt.delete(l),tr.delete(a),f!==r&&((S=f.parentNode)==null||S.removeChild(f))}});return tr.set(a,o),a}let tr=new WeakMap;function Oi(e,t,r,n=null,i=!1){var s=e,u=null,c=null,l=null,a=i?Dt:0;Pt(()=>{l!==(l=!!t())&&(l?(u?Je(u):u=Pe(()=>r(s)),c&&pt(c,()=>{c=null})):(c?Je(c):n&&(c=Pe(()=>n(s))),u&&pt(u,()=>{u=null})))},a)}function rr(e,t){return t}function wi(e,t,r,n){for(var i=[],s=t.length,u=0;u<s;u++)Bt(t[u].e,i,!0);var c=s>0&&i.length===0&&r!==null;if(c){var l=r.parentNode;Yn(l),l.append(r),n.clear(),Q(e,t[0].prev,t[s-1].next)}Ur(i,()=>{for(var a=0;a<s;a++){var o=t[a];c||(n.delete(o.k),Q(e,o.prev,o.next)),de(o.e,!c)}})}function nr(e,t,r,n,i,s=null){var u=e,c={flags:t,items:new Map,first:null};{var l=e;u=l.appendChild(Tr())}var a=null,o=!1;Pt(()=>{var f=r(),d=kt(f)?f:f==null?[]:At(f),g=d.length;if(!(o&&g===0)){o=g===0;{var S=I;Mi(d,c,u,i,t,(S.f&Y)!==0,n)}s!==null&&(g===0?a?Je(a):a=Pe(()=>s(u)):a!==null&&pt(a,()=>{a=null})),r()}})}function Mi(e,t,r,n,i,s,u){var c=e.length,l=t.items,a=t.first,o=a,f,d=null,g=[],S=[],O,M,p,E;for(E=0;E<c;E+=1){if(O=e[E],M=u(O,E),p=l.get(M),p===void 0){var b=o?o.e.nodes_start:r;d=Ai(b,t,d,d===null?t.first:d.next,O,M,E,n,i),l.set(M,d),g=[],S=[],o=d.next;continue}if(ki(p,O,E),p.e.f&Y&&Je(p.e),p!==o){if(f!==void 0&&f.has(p)){if(g.length<S.length){var R=S[0],w;d=R.prev;var T=g[0],x=g[g.length-1];for(w=0;w<g.length;w+=1)ir(g[w],R,r);for(w=0;w<S.length;w+=1)f.delete(S[w]);Q(t,T.prev,x.next),Q(t,d,T),Q(t,x,R),o=R,d=x,E-=1,g=[],S=[]}else f.delete(p),ir(p,o,r),Q(t,p.prev,p.next),Q(t,p,d===null?t.first:d.next),Q(t,d,p),d=p;continue}for(g=[],S=[];o!==null&&o.k!==M;)(s||!(o.e.f&Y))&&(f??(f=new Set)).add(o),S.push(o),o=o.next;if(o===null)continue;p=o}g.push(p),d=p,o=p.next}if(o!==null||f!==void 0){for(var k=f===void 0?[]:At(f);o!==null;)(s||!(o.e.f&Y))&&k.push(o),o=o.next;var C=k.length;if(C>0){var oe=c===0?r:null;wi(t,k,oe,l)}}y.first=t.first&&t.first.e,y.last=d&&d.e}function ki(e,t,r,n){kr(e.v,t),e.i=r}function Ai(e,t,r,n,i,s,u,c,l){var a=(l&Pn)!==0,o=(l&Cn)===0,f=a?o?Nt(i):V(i):i,d=l&Bn?V(u):u,g={i:d,v:f,k:s,a:null,e:null,prev:r,next:n};try{return g.e=Pe(()=>c(e,f,d),qn),g.e.prev=r&&r.e,g.e.next=n&&n.e,r===null?t.first=g:(r.next=g,r.e.next=g.e),n!==null&&(n.prev=g,n.e.prev=g.e),g}finally{}}function ir(e,t,r){for(var n=e.next?e.next.e.nodes_start:r,i=t?t.e.nodes_start:r,s=e.e.nodes_start;s!==n;){var u=it(s);i.before(s),s=u}}function Q(e,t,r){t===null?e.first=r:(t.next=r,t.e.next=r&&r.e),r!==null&&(r.prev=t,r.e.prev=t&&t.e)}function Ge(e,t,r){if(r){if(e.classList.contains(t))return;e.classList.add(t)}else{if(!e.classList.contains(t))return;e.classList.remove(t)}}function Ii(e,t,r=t){var n=st();Kr(e,"input",()=>{var i=sr(e)?ur(e.value):e.value;r(i),n&&i!==(i=t())&&(e.value=i??"")}),ke(()=>{var i=t();sr(e)&&i===ur(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function Di(e,t,r=t){Kr(e,"change",()=>{var n=e.checked;r(n)}),t()==null&&r(!1),ke(()=>{var n=t();e.checked=!!n})}function sr(e){var t=e.type;return t==="number"||t==="range"}function ur(e){return e===""?null:+e}function or(e,t){return e===t||(e==null?void 0:e[le])===t}function Ti(e={},t,r,n){return xt(()=>{var i,s;return ke(()=>{i=s,s=[],ye(()=>{e!==r(...s)&&(t(e,...s),i&&or(r(...i),e)&&t(null,...i))})}),()=>{ii(()=>{s&&or(r(...s),e)&&t(null,...s)})}}),e}function Ni(e=!1){const t=D,r=t.l.u;if(!r)return;let n=()=>Hr(t.s);if(e){let i=0,s={};const u=xe(()=>{let c=!1;const l=t.s;for(const a in l)l[a]!==s[a]&&(s[a]=l[a],c=!0);return c&&i++,i});n=()=>A(u)}r.b.length&&Jn(()=>{ar(t,n),ht(r.b)}),mt(()=>{const i=ye(()=>r.m.map(pn));return()=>{for(const s of i)typeof s=="function"&&s()}}),r.a.length&&mt(()=>{ar(t,n),ht(r.a)})}function ar(e,t){if(e.l.s)for(const r of e.l.s)A(r);t()}let Fe=!1;function Li(e){var t=Fe;try{return Fe=!1,[e(),Fe]}finally{Fe=t}}function lr(e){for(var t=y,r=y;t!==null&&!(t.f&(q|ze));)t=t.parent;try{return j(t),e()}finally{j(r)}}function Yr(e,t,r,n){var x;var i=(r&zn)!==0,s=!Me||(r&$n)!==0,u=(r&Xn)!==0,c=(r&Vn)!==0,l=!1,a;u?[a,l]=Li(()=>e[t]):a=e[t];var o=le in e||yn in e,f=((x=pe(e,t))==null?void 0:x.set)??(o&&u&&t in e?k=>e[t]=k:void 0),d=n,g=!0,S=!1,O=()=>(S=!0,g&&(g=!1,c?d=ye(n):d=n),d);a===void 0&&n!==void 0&&(f&&s&&An(),a=O(),f&&f(a));var M;if(s)M=()=>{var k=e[t];return k===void 0?O():(g=!0,S=!1,k)};else{var p=lr(()=>(i?xe:Wn)(()=>e[t]));p.f|=Sn,M=()=>{var k=A(p);return k!==void 0&&(d=void 0),k===void 0?d:k}}if(!(r&Un))return M;if(f){var E=e.$$legacy;return function(k,C){return arguments.length>0?((!s||!C||E||l)&&f(C?M():k),k):M()}}var b=!1,R=!1,w=Nt(a),T=lr(()=>xe(()=>{var k=M(),C=A(w);return b?(b=!1,R=!0,C):(R=!1,w.v=k)}));return i||(T.equals=Tt),function(k,C){if(arguments.length>0){const oe=C?A(T):s&&u?te(k):k;return T.equals(oe)||(b=!0,z(w,oe),S&&d!==void 0&&(d=oe),ye(()=>A(T))),k}return A(T)}}function xi(e){D===null&&si(),Me&&D.l!==null?Pi(D).m.push(e):mt(()=>{const t=ye(e);if(typeof t=="function")return t})}function Pi(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const Bi="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Bi);Ln();const Xt="gySVGObject",Ci="http://www.w3.org/2000/svg",Wr="svg",Re="object",tt="function",Vt="string",zi="boolean",jr="undefined",$i="symbol",Zr="path",at="animate",Ui="none",Xi="freeze",We="d",Vi="transform",Jr="rotate",lt="translate",Gi="offset",fr="inherit",cr="finished",ge="",Rt=",",Fi=[Jr,"skewX","skewY"],qi="deg",Ie="px",dr="ms",ft=new WeakMap,ct=new Set;let Ot=!1;if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion: reduce)");Ot=e.matches,e.addEventListener("change",()=>{Ot=e.matches})}const Hi=e=>e==="el"||e[0]==="_"||P(e,$i),P=(e,t)=>typeof e===t,Se=(e,t)=>e instanceof t,Ki=()=>Xt+Math.random().toString(32).substring(2),Gt=e=>P(e,Re)&&e!==null&&e[Symbol.toStringTag]===Xt,Yi=e=>rt(document.createElementNS(Ci,e)),wt=e=>P(e,Vt)?Yi(e):P(e,Re)&&e!==null?Gt(e)?e:rt(e):e,Wi=e=>({content:"innerHTML",source:"outerHTML",parent:"parentElement",next:"nextElementSibling",previous:"previousElementSibling"})[e]||e,ji=e=>e.replace(/([A-Z])/g,"-$1").toLowerCase();class Qr{constructor(t){this._el=t,this.gySVG=ne}get[Symbol.toStringTag](){return Xt}get el(){return this._el}add(t){let r=wt(t);return r&&this._el.appendChild(r._el),r}addBefore(t){let r=wt(t);return r&&this._el.insertBefore(r._el,this._el.firstChild||null),r}attachTo(t){return(P(t,Re)?Gt(t)?t._el:t:document.querySelector(t)).appendChild(this._el),this}id(t){return t?(this._el.setAttribute("id",t),this):this._el.id||(this._el.id=Ki())}ref(){return`#${this.id()}`}url(){return`url(${this.ref()})`}animateTo(t,r={duration:200},n=null,i=null){const s=p=>{const E=P(p,Re)?Object.assign({},p):{duration:p};return Ot&&(E.duration=0),E.fill=Ui,E},u=p=>{p=Se(p,Array)?p:[p];const E=window.getComputedStyle(this._el),b=[],R=new Set;for(let w of p){const T=Object.assign({},w);for(let x in T)x in E?x===We?T.d=`${Zr}("${T.d}")`:x===Vi&&(T.transform=a(T.transform)):R.add(x);b.push(T)}return l(R,b),b},c=[],l=(p,E)=>{if(p.size){const b=new KeyframeEffect(null,E).getKeyframes(),R=this.closest(Wr).getCurrentTime()*1e3;for(let w of p){const T=ne(at).attributeName(w).dur(S.duration+dr).begin((0|R+(r.delay||0))+dr).fill(Xi);if(E.length===1)T.to(E[0][w]);else{const x=[],k=[];for(let C in b){const oe=b[C];w in E[C]&&(x.push(oe.computedOffset),k.push(E[C][w]))}x[0]!==0&&(x.unshift(0),k.unshift(this[w]()||fr)),x[x.length-1]!==1&&(x.push(1),k.push(this[w]()||fr)),T.keyTimes(x.join(";")).values(k.join(";"))}c.push(T),T.attachTo(this)}}},a=p=>{P(p,Vt)&&(p=JSON.parse("{"+p.replace(/\s*\(\s*/g,":[").replace(/\s*\)\s*/g,"],").split(/\s*,\s*|\s.*/).join(",").replace(/(\w+):/g,'"$1":').replace(/,$/,"")+"}"));let E=ge;for(let b in p)if(b===Jr){const R=o(p[b]);R.length>1&&(E+=`${lt}(${R[1]}${Ie},${R[2]}${Ie}) `),E+=`${b}(${R[0]}${f(b)}) `,R.length>1&&(E+=`${lt}(-${R[1]}${Ie},-${R[2]}${Ie}) `)}else E+=`${b}(${o(p[b]).map(R=>R+f(b)).join(Rt)}) `;return E},o=p=>Se(p,Array)?p:String(p).split(/\s+|,/),f=p=>Fi.includes(p)?qi:p===lt?Ie:ge,d=p=>typeof p=="string"?p.replace(/(deg)|(px)/g,ge).trim():p,g=p=>p.replace(/(path\s*\(\s*["'])|(["']\s*\)\s*$)/g,ge).trim().replace(/([a-zA-Z])\s*/g,"$1").replace(/\s+/g,Rt),S=s(r),O=u(t),M=this._el.animate(O,S);return M.ready.then(()=>P(n,tt)&&n.call(this,M)),M.finished.then(()=>{const p=O[O.length-1];for(let E in p){const b=ji(E);/^text-/.test(b)?this._el.style[E]=p[E]:E!==Gi&&E in p&&this._el.setAttribute(b,b==="d"?g(p[E]):d(p[E]))}c.forEach(E=>{E[cr](!0);const b=this._el.querySelectorAll(at),R=this._el.querySelectorAll(`${at}[${cr}]`);b.length===R.length&&b.forEach(w=>w.remove())}),P(i,tt)&&i.call(this,M)}),this}}const rt=e=>{if(!P(e,Re)||e===null)return null;if(ft.has(e))return ft.get(e);const t=new Proxy(new Qr(e),{get(r,n){if(Hi(n))return r[n];if(!P(r[n],jr))return(...i)=>be(t,n,i)||r[n].call(t,...i);if(n===We&&e.tagName.toLowerCase()===Zr){let i=ge;const s=new Proxy(u=>be(t,n,[u])||u?e.setAttribute(We,u)||t:e.getAttribute(We),{get(u,c){return(...l)=>(i+=Zi(t,c,l)||`${c}${l.join(Rt)}`,e.setAttribute(n,i),s)}});return s}return n=Wi(n),P(e[n],tt)?(...i)=>{const s=be(t,n,i)||e[n].call(e,...i);return s===void 0?t:tn(s)}:en(e,n,t)}});return ft.set(e,t),t},en=(e,t,r,n)=>{const i=t.replace(/_/g,"-"),s=(...u)=>{const c=be(r,n?`${n}.${t}`:t,u);if(c!==void 0)return c;if(u.length===0){const a=e.hasAttribute&&e.hasAttribute(i)?e.getAttribute(i):e[i];return tn(a)}const l=u[0];if(Se(e,CSSStyleDeclaration))return e[i]=l,r;if(i in e&&!ct.has(i)){if(e[i]===l)return r;const a=e[i];try{e[i]=l}catch{ct.add(i)}if(P(e[i],Re)&&e[i]===l||e[i]!==a)return r;ct.add(i)}return l!==0&&!l?e.removeAttribute(i):e.setAttribute(i,P(l,zi)?"":String(u)),r};return new Proxy(s,{get(u,c){const l=e[i][c];return P(l,tt)?(...a)=>{const o=be(r,`${t}.${c}`,a)||l.call(e[i],...a);return o===void 0?r:o}:en(e[i],c,r,i)},set(u,c,l){return e[i][c]=l,!0}})},tn=e=>Se(e,HTMLCollection)||Se(e,NodeList)?[...e].map(t=>rt(t)):Se(e,SVGElement)?rt(e):P(e,Vt)?e===""||Number.isNaN(Number(e))?e:Number(e):e,be=(e,t,r)=>{if(e._call)return e._call(e,t,r)},Zi=(e,t,r)=>{if(e._d)return e._d(e,t,r)};function ne(e){return be(ne,ge,[e]),wt(P(e,jr)?Wr:e)}ne.isWrapped=Gt;ne.extend=e=>(e(ne,Qr),ne);class Ji{constructor(){H(this,"context");const t=document.createElement("canvas");this.context=t.getContext("2d")}measure(t,r){return this.context.font=r+" arial",this.context.measureText(t)}}const qe="18px",K=5,dt=10,vr=10;class Qi{constructor(t){H(this,"svg");H(this,"node",null);H(this,"measurer",new Ji);this.container=t,this.svg=ne().width("100%").height("100%"),this.svg.attachTo(this.container)}display(t){this.node&&this.node.remove();const{height:r,node:n}=this.makeNode(this.svg,t,{x:vr,y:vr});this.node=n,this.svg.height(r)}makeNode(t,r,n){const i=t.add("g").transform(`translate(${n.x}, ${n.y})`),s=i.add("g");let u=0,c=0;const l=[],a=[];r.forEach(o=>{const f=this.measurer.measure(o.text,qe),d=f.actualBoundingBoxAscent,g=f.actualBoundingBoxAscent+f.actualBoundingBoxDescent,S={width:f.width+K*2,height:g+K*2},O=i.add("g").transform(`translate(${c},${u})`);O.add("rect").width(S.width).height(S.height).fill("none").stroke_width(2).stroke("rgb(52,101,164)"),O.add("text").text_anchor("middle").dx(K+f.width/2).dy(K+d).style.fontSize(qe).content(o.text),l.push({x:c,y:u,width:S.width,height:S.height}),c+=f.width+K*2+dt}),u+=l.reduce((o,f)=>Math.max(o,f.height),0)+10;for(let o=r.length-1;o>=0;--o){const f=r[o],d=this.measurer.measure(f.element.text,qe),g=d.actualBoundingBoxAscent;let S=d.actualBoundingBoxAscent+d.actualBoundingBoxDescent;const O=i.add("g").transform(`translate(${c},${u})`);if(O.add("text").text_anchor("middle").dx(K+d.width/2).dy(K+g).style.fontSize(qe).content(f.element.text),a.push({x:c,y:u+S/2+K}),f.element.t==="Node"){const{height:M}=this.makeNode(O,f.element.element,{x:d.width+K*2+dt,y:0});S+=M}u+=S+K*2+dt}return l.forEach((o,f)=>{const d=a[a.length-1-f];s.add("polyline").fill("none").stroke_width(3).stroke("rgb(115,210,22)").points([[o.x+o.width/2,o.y+o.height],[o.x+o.width/2,d.y],[d.x,d.y]])}),{height:u,node:i}}}function es(e,t){const r={};return e.forEach(n=>{const i=t(n);let s=r[i];s||(s=[],r[i]=s),s.push(n)}),r}var m=(e=>(e.S_8="8",e.S_16="16",e.S_32="32",e.S_16_32="16/32",e))(m||{});function ts(e){switch(e){case"8":return 8;case"16":return 16;default:return 32}}const v=(e,t,r)=>({opcodes:e,name:t,operands:r}),h=e=>({t:"O",value:e}),he=e=>({t:"O_R",value:e}),N=e=>({t:"E",value:e}),L={t:"MODRM"};function _(e){return e.map(rs)}function rs(e){if(e.startsWith("r/m")){const t=He(e.slice(3));return t?{t:"RM",size:t}:{t:"Error"}}else if(e.startsWith("rel")){const t=He(e.slice(3));return t?{t:"REL",size:t}:{t:"Error"}}else if(e.startsWith("r")){const t=He(e.slice(1));return t?{t:"R",size:t}:{t:"Error"}}else if(e.startsWith("imm")){const t=He(e.slice(3));return t?{t:"I",size:t}:{t:"Error"}}else{const t=ns(e);return t?{t:"Register",name:t.name,size:t.size}:{t:"Error"}}}function He(e){if(e==="32")return"32";if(e==="16")return"16";if(e==="8")return"8";if(e==="16/32")return"16/32"}function ns(e){if(e==="E_AX")return{size:"16/32",name:"AX"};if(e==="EAX")return{size:"32",name:"AX"};if(e==="AX")return{size:"16",name:"AX"};if(e==="AL")return{size:"8",name:"AL"};if(e==="DX")return{size:"16",name:"DX"}}const rn=[v([h(0),L],"ADD",_(["r/m8","r8"])),v([h(1),L],"ADD",_(["r/m16/32","r16/32"])),v([h(2),L],"ADD",_(["r8","r/m8"])),v([h(3),L],"ADD",_(["r16/32","r/m16/32"])),v([h(4)],"ADD",_(["AL","imm8"])),v([h(5)],"ADD",_(["E_AX","imm16/32"])),v([h(128),N(0)],"ADD",_(["r/m8","imm8"])),v([h(129),N(0)],"ADD",_(["r/m16/32","imm16/32"])),v([h(131),N(0)],"ADD",_(["r/m16/32","imm8"])),v([h(254),N(1)],"DEC",_(["r/m8"])),v([h(255),N(1)],"DEC",_(["r/m16/32"])),v([he(72)],"DEC",_(["r16/32"])),v([h(246),N(6)],"DIV",_(["r/m8"])),v([h(247),N(6)],"DIV",_(["r/m16/32"])),v([h(244)],"HLT",[]),v([h(15),h(1),N(2)],"LGDT",_(["r/m16/32"])),v([h(15),h(1),N(3)],"LIDT",_(["r/m16/32"])),v([h(246),N(7)],"IDIV",_(["r/m8"])),v([h(247),N(7)],"IDIV",_(["r/m16/32"])),v([h(246),N(5)],"IMUL",_(["r/m8"])),v([h(247),N(5)],"IMUL",_(["r/m16/32"])),v([h(15),h(175),L],"IMUL",_(["r16/32","r/m16/32"])),v([h(107),L],"IMUL",_(["r16/32","r/m16/32","imm8"])),v([h(105),L],"IMUL",_(["r16/32","r/m16/32","imm16/32"])),v([h(228)],"IN",_(["AL","imm8"])),v([h(229)],"IN",_(["E_AX","imm8"])),v([h(236)],"IN",_(["AL","DX"])),v([h(237)],"IN",_(["E_AX","DX"])),v([h(254),N(0)],"INC",_(["r/m8"])),v([h(255),N(0)],"INC",_(["r/m16/32"])),v([he(64)],"INC",_(["r16/32"])),v([h(204)],"INT3",[]),v([h(205)],"INT",_(["imm8"])),v([h(15),h(132)],"JE",_(["rel16/32"])),v([h(233)],"JMP",_(["rel16/32"])),v([h(141),L],"LEA",_(["r16/32","m"])),v([h(136),L],"MOV",_(["r/m8","r8"])),v([h(137),L],"MOV",_(["r/m16/32","r16/32"])),v([h(138),L],"MOV",_(["r8","r/m8"])),v([h(139),L],"MOV",_(["r16/32","r/m16/32"])),v([h(140),L],"MOV",_(["r/m16","sreg"])),v([h(142),L],"MOV",_(["sreg","r/m16"])),v([h(160)],"MOV",_(["AL","moffs8"])),v([h(161)],"MOV",_(["E_AX","moffs16/32"])),v([h(162)],"MOV",_(["moffs8","AL"])),v([h(163)],"MOV",_(["moffs16/32","E_AX"])),v([he(176)],"MOV",_(["r8","imm8"])),v([he(184)],"MOV",_(["r16/32","imm16/32"])),v([h(198),N(0)],"MOV",_(["r/m8","imm8"])),v([h(199),N(0)],"MOV",_(["r/m16/32","imm16/32"])),v([h(15),h(182),L],"MOVZX",_(["r16/32","r/m8"])),v([h(15),h(183),L],"MOVZX",_(["r32","r/m16"])),v([h(246),N(4)],"MUL",_(["r/m8"])),v([h(247),N(4)],"MUL",_(["r/m16/32"])),v([h(144)],"NOP",[]),v([h(230)],"OUT",_(["imm8","AL"])),v([h(231)],"OUT",_(["imm8","E_AX"])),v([h(238)],"OUT",_(["DX","AL"])),v([h(239)],"OUT",_(["DX","E_AX"])),v([he(88)],"POP",_(["r32"])),v([he(80)],"PUSH",_(["r32"])),v([h(195)],"RET",[]),v([h(44)],"SUB",_(["AL","imm8"])),v([h(45)],"SUB",_(["E_AX","imm16/32"])),v([h(128),N(5)],"SUB",_(["r/m8","imm8"])),v([h(129),N(5)],"SUB",_(["r/m16/32","imm16/32"])),v([h(131),N(5)],"SUB",_(["r/m16/32","imm8"])),v([h(40),L],"SUB",_(["r/m8","r8"])),v([h(41),L],"SUB",_(["r/m16/32","r16/32"])),v([h(42),L],"SUB",_(["r8","r/m8"])),v([h(43),L],"SUB",_(["r16/32","r/m16/32"])),v([h(168)],"TEST",_(["AL","imm8"])),v([h(169)],"TEST",_(["E_AX","imm16/32"])),v([h(246),N(0)],"TEST",_(["r/m8","imm8"])),v([h(247),N(0)],"TEST",_(["r/m16/32","imm16/32"])),v([h(132),L],"TEST",_(["r/m8","r8"])),v([h(133),L],"TEST",_(["r/m16/32","r16/32"]))];function nn(e){return e.name+" "+e.operands.map(is)}function is(e){return e.t==="RM"?"r/m"+Ke(e.size):e.t==="R"?"r"+Ke(e.size):e.t==="I"?"imm"+Ke(e.size):e.t==="REL"?"rel"+Ke(e.size):e.t==="Register"?Ft(e.size,e.name):"<error>"}function Ke(e){if(e==="32")return"32";if(e==="16")return"16";if(e==="8")return"8";if(e==="16/32")return"16/32";throw Error("Impossible")}function Ft(e,t){if(t==="AX")return e==="16"?"AX":"EAX";if(t==="AL")return"AL";if(t==="DX")return"DX";throw Error("Impossible")}const hr=es(rn,e=>e.name);function ss(e,t,r){if(t.operands.length!=r.length)return;const n={pc:134217728,elements:[],reg:void 0,rm:void 0,is32bits:e};us(t,r,n);const i=t.operands.map((s,u)=>({def:s,operand:r[u]}));return t.opcodes.forEach(s=>{s.t==="O"?n.elements.push({t:"Opcode",value:s.value}):s.t==="O_R"?n.elements.push({t:"OpcodeAndReg",opcode:s.value>>3,register:fs(i)}):s.t==="E"&&(n.reg={t:"EXT",value:s.value})}),i.forEach(s=>{os(n,s.def,s.operand)}),n.elements}function us(e,t,r){if(e.operands.some(n=>n.t==="R"&&n.size===m.S_16_32||n.t==="RM"&&n.size===m.S_16_32)){let n;t.forEach(i=>{const s=i.kind==="Register"?ds(i.name):i.kind==="EffectiveAddress"?i.address.size:void 0;s&&(n&&s!==n?console.log("OPERAND SIZE MISMATCH"):n=s)}),(r.is32bits&&n===m.S_16||!r.is32bits&&n===m.S_32)&&(r.is32bits=!r.is32bits,r.elements.push({t:"Prefix",value:102}))}}function os(e,t,r){if(t.t==="RM"&&r.kind==="EffectiveAddress")mr(e,ls(r.address));else if(t.t==="RM"&&r.kind==="Register")mr(e,{isReg:!0,base:r.name.toUpperCase()});else if(t.t==="R"&&r.kind==="Register"){const n={t:"REG",name:r.name.toUpperCase()};e.rm!==void 0&&n!=null?sn(n,e.rm,e):e.reg=n}else t.t==="I"&&r.kind==="Immediate"?ee({t:"Immediate",size:_r(t.size,e.is32bits),value:r.value},e):t.t==="REL"&&r.kind==="Immediate"&&ee({t:"Immediate",size:_r(t.size,e.is32bits),value:r.value-e.pc-as(e.elements)-4},e)}function as(e){let t=0;return e.forEach(r=>{switch(r.t){case"Opcode":case"OpcodeAndReg":case"ModRM":t+=1;break;case"Immediate":{switch(r.size){case m.S_8:t+=1;break;case m.S_16:t+=2;break;case m.S_32:t+=4;break;default:throw`IMM SIZE ${JSON.stringify(r)}`}break}default:throw`TODO ${r.t}`}}),t}function _r(e,t){if(e===m.S_8)return m.S_8;if(e===m.S_16)return m.S_16;if(e===m.S_32)return m.S_32;if(e===m.S_16_32)return t?m.S_32:m.S_16;throw new Error("impossible")}function ls(e){var r;let t=e.index?{scale:e.index.scale,register:fe(e.index.register)}:void 0;return e.displacement==0?{isReg:!1,base:(r=e.base)==null?void 0:r.toUpperCase(),index:t,disp:void 0}:{isReg:!1,base:e.base,index:t,disp:e.displacement}}function mr(e,t){e.reg!==void 0?sn(e.reg,t,e):e.rm=t}function sn(e,t,r){if(t.isReg===!0&&t.base!==void 0)r.elements.push({t:"ModRM",mode:"REG",reg:e,rm:{t:"REG",name:t.base}});else if(t.base!==void 0&&t.index===void 0){let{mode:n,disp:i}=gr(t.disp);ee({t:"ModRM",mode:n,reg:e,rm:{t:"REG",name:t.base}},r),pr(i,r)}else if(t.base!==void 0&&t.index!==void 0){let{mode:n,disp:i}=gr(t.disp);ee({t:"ModRM",mode:n,reg:e,rm:{t:"SIB"}},r),ee({t:"Sib",reg:fe(t.base),index:t.index.register,scale:t.index.scale},r),pr(i,r)}else t.base===void 0&&t.index!==void 0&&(ee({t:"ModRM",mode:"MEMORY",reg:e,rm:{t:"SIB"}},r),ee({t:"Sib",reg:fe("EBP"),index:t.index.register,scale:t.index.scale},r),ee({t:"Disp32",value:t.disp!==void 0?t.disp:0},r))}function fs(e){for(let t of e)if(t.def.t==="R"&&t.operand.kind==="Register")return fe(t.operand.name);return 0}function cs(e){return e.t==="REG"?fe(e.name):e.value}function ds(e){const t=e.toUpperCase();return t.startsWith("E")?m.S_32:t.endsWith("X")||["SP","BP","DI","SI"].includes(t)?m.S_16:m.S_8}function fe(e){switch(e.toUpperCase()){case"AL":return 0;case"CL":return 1;case"DL":return 2;case"BL":return 3;case"AH":return 4;case"CH":return 5;case"DH":return 6;case"BH":return 7;case"AX":return 0;case"CX":return 1;case"DX":return 2;case"BX":return 3;case"SP":return 4;case"BP":return 5;case"SI":return 6;case"DI":return 7;case"EAX":return 0;case"ECX":return 1;case"EDX":return 2;case"EBX":return 3;case"ESP":return 4;case"EBP":return 5;case"ESI":return 6;case"EDI":return 7;default:return console.log(`ENCODE REG: impossible ${e}`),-1}}function gr(e){return e!==void 0?-128<e&&e<127?{mode:"MEMORY_DISP8",disp:{t:"Disp8",value:e}}:{mode:"MEMORY_DISP32",disp:{t:"Disp32",value:e}}:{mode:"MEMORY"}}function ee(e,t){t.elements.push(e)}function pr(e,t){e!==void 0&&t.elements.push(e)}function vs(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;default:return 3}}function hs(e){switch(e){case"MEMORY":return 0;case"MEMORY_DISP8":return 1;case"MEMORY_DISP32":return 2;case"REG":return 3}}function _s(e){return`${e.name} ${e.operands.map(t=>ms(t)).join(", ")}`}function ms(e){switch(e.kind){case"Register":return e.name;case"Immediate":return Le(e.value);case"EffectiveAddress":return gs(e.address)}}function gs(e){return`${e.size===m.S_16?"WORDPTR ":e.size===m.S_8?"BYTEPTR ":""}[${ps(e)}]`}function ps(e){const t=e.base,r=e.index?`${e.index.register}*${e.index.scale}`:void 0;let n=e.displacement!==0?Le(e.displacement):void 0;return[t,r,n].filter(i=>i!==void 0).reduce((i,s,u)=>i+(s[0]==="-"||u===0?s:"+"+s),"")}function Le(e){return e<1e3?e.toString():e.toString(16)+"h"}function Er(e){return e.map(t=>Es(t))}function Es(e){switch(e.t){case"Prefix":return{text:_e([e.value]),element:{t:"Leaf",text:"Prefix"}};case"Opcode":return{text:_e([e.value]),element:{t:"Leaf",text:"Opcode"}};case"OpcodeAndReg":return vt(ys,[e.opcode,e.register]);case"ModRM":return vt(ks,[e.mode,e.reg,e.rm]);case"Sib":return vt(Rs,[vs(e.scale),e.index,e.reg]);case"Disp8":return{text:_e([e.value]),element:{t:"Leaf",text:"Displacement: "+Le(e.value)}};case"Disp32":return{text:_e(Sr(32,e.value)),element:{t:"Leaf",text:"Displacement: "+Le(e.value)}};case"Immediate":return{text:_e(Sr(ts(e.size),e.value)),element:{t:"Leaf",text:"Immediate value: "+Le(e.value)}}}}function Ss(e,t){let r="";for(let n=1;n<=e;++n)r+=(t>>e-n&1).toString();return r}function Sr(e,t){const r=[];for(let n=0;n<e/8;++n)r.push(t>>n*8&255);return r}function _e(e){return e.map(t=>bs(t)).join(" ")}function bs(e){return(e+256).toString(16).slice(1,3)}function vt(e,t){const r=[];let n=0;return e.elements.forEach((i,s)=>{let u=t[s],c=i.name;i.encode&&(c=i.encode.label(u),u=i.encode.value(u)),r.push({text:Ss(i.size,u),element:{t:"Leaf",text:c}}),n|=u<<i.shift}),{text:_e([n]),element:{t:"Node",text:e.name,element:r}}}const ys={name:"Opcode and Register",elements:[{name:"Opcode",size:5,shift:3},{name:"Reg",size:3,shift:0}]},Rs={name:"SIB",elements:[{name:"Scale",size:2,shift:6},{name:"Index",size:3,shift:3},{name:"Base",size:3,shift:0}]};function Os(e){return e.t==="REG"?e.name:`Opcode Ext ${e.value}`}function ws(e){return e.t==="REG"?fe(e.name):fe("ESP")}function Ms(e){return e.t==="REG"?e.name:"SIB"}const ks={name:"ModRM",elements:[{name:"Mode",size:2,shift:6,encode:{value:hs,label:e=>`Mode (${e})`}},{name:"Reg",size:3,shift:3,encode:{value:e=>cs(e),label:e=>`Reg (${Os(e)})`}},{name:"RM",size:3,shift:0,encode:{value:ws,label:e=>`RM (${Ms(e)})`}}]};var As=Xe("<div></div>");function Is(e,t){$t(t,!1);let r=Yr(t,"encoding",24,()=>[]),n=xn(),i;function s(c){i&&i.display(Er(c))}xi(()=>{i=new Qi(A(n)),i.display(Er(r()))}),ei(()=>Hr(r()),()=>{s(r())}),ti(),Ni();var u=As();Ti(u,c=>z(n,c),()=>A(n)),Ne(e,u),Ut()}var Ds=Xe('<div class="switch-component svelte-1oqwk5e"><span class="svelte-1oqwk5e"> </span> <label class="switch svelte-1oqwk5e"><input type="checkbox" class="svelte-1oqwk5e"> <span class="slider round svelte-1oqwk5e"></span></label> <span class="svelte-1oqwk5e"> </span></div>');function br(e,t){let r=Yr(t,"value",15,!0);var n=Ds(),i=G(n),s=G(i),u=J(i,2),c=G(u),l=J(u,2),a=G(l);gt(()=>{Ge(i,"off",r()),Ge(i,"on",!r()),et(s,t.leftLabel),Ge(l,"on",r()),Ge(l,"off",!r()),et(a,t.rightLabel)}),Di(c,r),Ne(e,n)}class Ts{constructor(t){H(this,"position",0);this.content=t}nextToken(){for(;;){const t=this.getChar();if(t===void 0)return{kind:"EOF"};if(!this.isSpace(t))return this.isLetter(t)?this.scanIdent(t):this.isDigit(t)?this.scanInteger(t):t===","?{kind:"COMA"}:t==="["?{kind:"LBRT"}:t==="]"?{kind:"RBRT"}:t==="+"?{kind:"ADD"}:t==="-"?{kind:"SUB"}:t==="*"?{kind:"MUL"}:{kind:"ERROR",msg:t}}}getChar(){if(!(this.position>=this.content.length))return this.content.charAt(this.position++)}pushBack(){this.position--}isSpace(t){return t==" "||t=="	"||t==`
`}isLetter(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"}isDigit(t){return t>="0"&&t<="9"}isHexDigit(t){return this.isDigit(t)||t>="a"&&t<="f"||t>="A"&&t<="F"}isLetterOrDigit(t){return this.isLetter(t)||this.isDigit(t)}scanIdent(t){let r=t;for(;;){const n=this.getChar();if(n===void 0)break;if(this.isLetterOrDigit(n))r+=n;else{this.pushBack();break}}return{kind:"IDENT",value:r}}scanInteger(t){let r=t;for(;;){const n=this.getChar();if(n===void 0)break;if(this.isHexDigit(n)||n==="h"||n==="b")r+=n;else{this.pushBack();break}}return{kind:"INTEGER",value:r}}}function Ns(e,t){const r=new Ls(t,e);return{instr:r.parseAssembly(),errors:r.errors}}class Ls{constructor(t,r){H(this,"lexer");H(this,"current");H(this,"errors",[]);H(this,"size");this.lexer=new Ts(r),this.current=this.lexer.nextToken(),this.size=t?m.S_32:m.S_16}parseAssembly(){const t=this.parseIdent();if(t.k=="OK"){const r=this.parseOperands();return{name:t.c.toUpperCase(),operands:r}}else return}parseOperands(){const t=[];for(;this.current.kind!=="EOF";){const r=this.parseOperand();if(r.k==="OK")t.push(r.c),this.current.kind==="COMA"&&this.advance();else break}return t}parseOperand(){if(this.current.kind==="IDENT"){const t=this.current.value.toUpperCase();return this.advance(),t==="BYTEPTR"?this.parseMemory(m.S_8):t==="WORDPTR"?this.parseMemory(m.S_16):{k:"OK",c:{kind:"Register",name:t}}}else if(this.current.kind==="INTEGER"){const t=this.current.value;return this.advance(),{k:"OK",c:{kind:"Immediate",value:this.immValue(t)??0}}}else if(this.current.kind==="LBRT")return this.parseMemory(this.size);return this.errorExpecting("IDENT, INTEGER or ["),{k:"NOK"}}parseMemory(t){this.current.kind!=="LBRT"&&this.errorExpecting("LBRT"),this.advance();const r=this.parseEffectiveAddress();return r.k==="OK"?{k:"OK",c:{kind:"EffectiveAddress",address:this.makeMemoryOperand(r.c,t)}}:{k:"NOK"}}parseEffectiveAddress(){const t=[];let r=!0;for(;;){const n=this.parseEAElement(r);if(n.k==="OK")if(t.push(n.c),this.current.kind==="ADD")this.advance(),r=!0;else if(this.current.kind==="SUB")r=!1;else return this.current.kind==="RBRT"?(this.advance(),{k:"OK",c:t}):{k:"OK",c:t};else return{k:"OK",c:t}}}parseEAElement(t){if(this.current.kind==="IDENT"){const r=this.current.value.toUpperCase();this.advance();const n=this.parseScale();return n.k==="OK"?{k:"OK",c:{type:"EARegister",register:r,scale:n.c}}:{k:"NOK"}}else if(this.current.kind==="INTEGER"){const r=this.current.value;return this.advance(),{k:"OK",c:{type:"EADisplacement",sign:t,disp:r}}}return this.errorExpecting("IDENT or INTEGER"),{k:"NOK"}}parseScale(){if(this.current.kind==="MUL"){this.advance();const t=this.parseInteger();return t.k==="OK"?{k:"OK",c:t.c}:{k:"NOK"}}return{k:"OK",c:void 0}}makeMemoryOperand(t,r){let n={size:r,base:void 0,index:void 0,displacement:0};return t.forEach(i=>{n=this.analyzeMemoryOperand(i,n)}),n}analyzeMemoryOperand(t,r){if(t.type==="EARegister"&&t.scale===void 0)return r.base?{...r,index:{register:t.register,scale:1}}:{...r,base:t.register};if(t.type==="EARegister"&&t.scale!==void 0){const n=this.scaleOf(t.scale);return!r.base&&n===1?{...r,base:t.register}:{...r,index:{register:t.register,scale:n}}}else if(t.type==="EADisplacement"){const n=this.immValue(t.disp);return n===void 0?r:{...r,displacement:r.displacement+(t.sign?n:-n)}}throw"impossible"}scaleOf(t){const r=parseInt(t);return r===1||r===2||r===4||r===8?r:(console.log(`BAD SCALE ${r}`),1)}immValue(t){return t.toUpperCase().endsWith("H")?parseInt(t.slice(0,t.length-1),16):parseInt(t)}parseIdent(){if(this.current.kind==="IDENT"){const t=this.current.value;return this.advance(),{k:"OK",c:t}}else return this.errorExpecting("IDENT"),{k:"NOK"}}parseInteger(){if(this.current.kind==="INTEGER"){const t=this.current.value;return this.advance(),{k:"OK",c:t}}else return this.errorExpecting("INTEGER"),{k:"NOK"}}addError(t){this.errors.push({msg:t})}errorExpecting(t){this.addError("expecting "+t)}advance(){this.current=this.lexer.nextToken(),this.skipErrors()}skipErrors(){for(;this.current.kind==="ERROR";)this.addError(`unexpected char '${this.current.msg}'`),this.advance()}}function xs(e,t){const r=e.operands.length>0?(s,u)=>s===u:(s,u)=>s.startsWith(u);return Object.keys(hr).filter(s=>r(s,e.name)).flatMap(s=>(hr[s]??[]).filter(({operands:u})=>Ps(e.operands,u))).map(s=>({name:nn(s),encoding:ss(t,s,e.operands)}))}function Ps(e,t){for(let r=0;r<e.length;++r)if(t.length>r){if(!Bs(e[r],t[r]))return!1}else return!0;return!0}function Bs(e,t){if(e.kind==="Register")return Cs(e.name,t);if(e.kind==="Immediate")return $s(e.value,t);if(e.kind==="EffectiveAddress")return Xs(e.address,t);throw Error("impossible")}function Cs(e,t){const r=Vs(e);return r===void 0?!0:t.t==="Register"?zs(e,t.size,t.name):t.t==="R"||t.t==="RM"?Mt(t.size,r):!1}function zs(e,t,r){return(t==m.S_16_32?[m.S_16,m.S_32]:[t]).map(i=>Ft(i,r)).some(i=>i.startsWith(e))}function Mt(e,t){return t===m.S_32?e===m.S_32||e===m.S_16_32:t===m.S_16?e===m.S_16||e===m.S_16_32:t===m.S_8?e===m.S_8:!1}function $s(e,t){return t.t==="I"?t.size==m.S_32||t.size==m.S_16_32||e<1<<Us(t.size):t.t==="REL"}function Us(e){if(e===m.S_8)return 8;if(e===m.S_16)return 16;if(e===m.S_32||e===m.S_16_32)return 32;throw Error("Impossible")}function Xs(e,t){return t.t==="RM"?Mt(t.size,e.size):!1}function Vs(e){if(e.startsWith("E"))return m.S_32;if(e.endsWith("X"))return m.S_16;if(e.endsWith("H")||e.endsWith("L"))return m.S_8}const un=Gs();function Gs(){const e=on(rn.map(t=>({opcodes:t.opcodes,instr:t})).flatMap(t=>fn(t)));return e.push({value:102,node:{t:"PrefixNode"}}),{t:"MatchOpcodeNode",nexts:e}}function Fs(e){return{t:"MatchOpcodeNode",nexts:on(e)}}function on(e){const t=new Map;e.forEach(n=>{let i=t.get(n.value);i||(i=[],t.set(n.value,i)),i.push(n.pending)});const r=[];return t.forEach((n,i)=>r.push({value:i,node:De(n)})),r}function De(e){if(e.length===1){const r=ln(e[0]);return r||{t:"UnknownNode"}}const t=e.map(r=>an(r));return qs(t)?{t:"NextOpcode",next:Fs(t.flatMap(fn))}:{t:"NextOpcode",next:{t:"ExtractModRM",next:{t:"MatchRegNode",nexts:t.flatMap(Hs)}}}}function an(e){return e.opcodes.length>0?{...e,opcodes:e.opcodes.slice(1)}:e}function ln(e){if(e.opcodes.length===0)return{t:"InstructionNode",instr:e.instr};if(e.opcodes[0].t==="O")return{t:"NextOpcode",next:De([{...e,opcodes:e.opcodes.slice(1)}])};if(e.opcodes[0].t==="O_R")return{t:"ExtractReg",next:De([{...e,opcodes:e.opcodes.slice(1)}])};if(e.opcodes[0].t==="E")return{t:"ExtractModRM",next:{t:"MatchRegNode",nexts:[{value:e.opcodes[0].value,node:De([{...e,opcodes:e.opcodes.slice(1)}])}]}};if(e.opcodes[0].t==="MODRM")return{t:"ExtractModRM",next:De([{...e,opcodes:e.opcodes.slice(1)}])};throw new Error("TODO")}function qs(e){return e.every(t=>t.opcodes.length>0&&t.opcodes[0].t==="O")}function fn(e){const t=e.opcodes[0];return t.t==="O"?[{value:t.value,pending:e}]:t.t==="O_R"?Array.from(Array(8).keys()).map(r=>({value:t.value|r,pending:e})):[]}function Hs(e){return e.opcodes.length>0&&e.opcodes[0].t==="E"?[{value:e.opcodes[0].value,node:ln(an(e))??{t:"UnknownNode"}}]:[]}function Ks(e,t){let r=fu(t);return Ys(e,r)}function Ys(e,t){let r=ae({bytes:t,length:t.length,error:"",node:un,pc:134217728,is32bits:e,reg:void 0,mode:void 0,rm:void 0,instr:void 0,elements:[],operands:[]});return{errors:r.error?[{msg:r.error}]:[],instructions:r.instr?[{name:Ws(r.instr,r.operands),encoding:r.elements}]:[]}}function Ws(e,t){return _s({name:e.name,operands:t})+"  ("+nn(e)+")"}function ae(e){if(e.node.t==="MatchOpcodeNode"){const t=e.bytes[0];if(t!==void 0){const r=e.node.nexts.find(n=>n.value===t);return r?ae({...e,node:r.node}):{...e,error:`Unknown Opcode ${t.toString(16)}`}}else return{...e,error:"Not enough bytes"}}if(e.node.t==="NextOpcode")return ae({...e,node:e.node.next,bytes:e.bytes.slice(1),elements:[...e.elements,{t:"Opcode",value:e.bytes[0]}]});if(e.node.t==="ExtractModRM")return ae(eu(e.bytes[0],{...e,node:e.node.next,bytes:e.bytes.slice(1)}));if(e.node.t==="InstructionNode")return ru(e.node.instr,e);if(e.node.t==="ExtractReg")return ae(Qs(e.bytes[0],{...e,node:e.node.next,bytes:e.bytes.slice(1)}));if(e.node.t==="MatchRegNode"){const t=e.reg??-1,r=e.node.nexts.find(n=>n.value===t);return r!==void 0?ae({...e,elements:js(e),node:r.node}):{...e,error:"Unknown"}}return e.node.t==="PrefixNode"?e.bytes[0]!==102?{...e,error:`Unknown prefix ${e.bytes[0].toString(16)}`}:ae({...e,is32bits:!e.is32bits,bytes:e.bytes.slice(1),node:un}):{...e,error:`NEXT ${e.node.t}`}}function js(e){return e.elements.map(t=>t.t==="ModRM"?{...t,reg:{t:"EXT",value:e.reg}}:t)}function Zs(e,t){return e.elements.map(r=>r.t==="ModRM"?{...r,rm:{t:"REG",name:ie(t,e.rm)}}:r)}function Js(e,t){return e.elements.map(r=>r.t==="ModRM"?{...r,reg:{t:"REG",name:ie(t,e.reg)}}:r)}function Qs(e,t){let r=e>>3&31,n=e&7;return{...t,reg:n,elements:[...t.elements,{t:"OpcodeAndReg",opcode:r,register:n}]}}function eu(e,t){const r=tu(e>>6&3),n=e>>3&7,i=e&7,s=t.is32bits?m.S_32:m.S_16;return{...t,mode:r,reg:n,rm:i,elements:[...t.elements,{t:"ModRM",mode:r,reg:{t:"REG",name:ie(s,n)},rm:{t:"REG",name:ie(s,i)}}]}}function tu(e){switch(e){case 0:return"MEMORY";case 1:return"MEMORY_DISP8";case 2:return"MEMORY_DISP32";default:return"REG"}}function ru(e,t){let r={...t,instr:e};return e.operands.forEach(n=>{r=nu(n,r)}),r}function nu(e,t){return e.t==="R"?iu(e.size,t):e.t==="Register"?ou(e.size,e.name,t):e.t==="RM"?su(e.size,t):e.t==="I"?au(e.size,t):e.t==="REL"?uu(e.size,t):{...t,error:t.error+" >> "+JSON.stringify(e)}}function iu(e,t){if(t.reg===void 0)return{...t,error:"No register to decode"};const r=Ce(e,t),n={kind:"Register",name:ie(r,t.reg)};return{...t,elements:r==m.S_8?Js(t,m.S_8):t.elements,operands:[...t.operands,n]}}function Ce(e,t){return e===m.S_16_32?t.is32bits?m.S_32:m.S_16:e}function su(e,t){let r=t,n;if(t.mode==="REG")n={kind:"Register",name:ie(Ce(e,t),t.rm??0)};else if(t.mode==="MEMORY"){if(t.rm===4)return{...t,error:"TODO decodeRM  SIB no disp"};if(t.rm===5){const i=Ce(e,t),{value:s,context:u}=t.is32bits?Kt(t):Ht(t),c=s??0;return n={kind:"EffectiveAddress",address:{size:i,displacement:c}},{...u,elements:[...u.elements,{t:"Immediate",size:i,value:c}],operands:[...u.operands,n]}}else return t.rm!==void 0?(n={kind:"EffectiveAddress",address:{size:e,base:ie(m.S_32,t.rm),displacement:0}},{...r,elements:Zs(r,m.S_32),operands:[...r.operands,n]}):{...t,error:"expecting modrm"}}else if(t.mode==="MEMORY_DISP8"){if(t.rm===4)return{...t,error:"TODO decodeRM  SIB with DISP8"};{const{value:i,context:s}=lu(t),u=i??0;return n={kind:"EffectiveAddress",address:{base:ie(t.is32bits?m.S_32:m.S_16,t.rm),size:t.is32bits?m.S_32:m.S_16,displacement:u}},{...s,operands:[...s.operands,n]}}}else return{...t,error:`TODO decodeRM ${t.mode}/${t.rm}`};return{...r,operands:[...r.operands,n]}}function uu(e,t){const r=e!==m.S_16_32?e:t.is32bits?m.S_32:m.S_16,{value:n,context:i}=r===m.S_8?qt(t):r===m.S_16?Ht(t):Kt(t);if(n!==void 0){const s=i.pc+n+(i.length-i.bytes.length);return{...i,operands:[...i.operands,{kind:"Immediate",value:s}],elements:[...t.elements,{t:"Immediate",size:r,value:n}]}}return i}function ie(e,t){switch(e){case m.S_8:return["AL","CL","DL","BL","AH","CH","DH","BH"][t];case m.S_16:return["AX","CX","DX","BX","SP","BP","SI","DI"][t];case m.S_32:return["EAX","ECX","EDX","EBX","ESP","EBP","ESI","EDI"][t];default:throw"impossible reg 16/32"}}function ou(e,t,r){return{...r,operands:[...r.operands,{kind:"Register",name:Ft(Ce(e,r),t)}]}}function au(e,t){let r=Ce(e,t),n;switch(r){case m.S_8:n=qt(t);break;case m.S_16:n=Ht(t);break;default:n=Kt(t)}return n.value!==void 0?{...n.context,operands:[...n.context.operands,{kind:"Immediate",value:n.value}],elements:[...n.context.elements,{t:"Immediate",size:r,value:n.value}]}:n.context}function lu(e){let{value:t,context:r}=qt(e);return t&&t&128&&(t-=256),{value:t,context:r}}function qt(e){return e.bytes.length>=1?{value:e.bytes[0],context:{...e,bytes:e.bytes.slice(1)}}:{value:void 0,context:{...e,error:"Not enough bytes"}}}function Ht(e){return e.bytes.length>=2?{value:e.bytes[1]<<8|e.bytes[0],context:{...e,bytes:e.bytes.slice(2)}}:{value:void 0,context:{...e,error:"Not enough bytes"}}}function Kt(e){if(e.bytes.length>=4){let t=0;for(let r=0;r<4;++r)t|=e.bytes[r]<<r*8;return{value:t,context:{...e,bytes:e.bytes.slice(4)}}}return{value:void 0,context:{...e,error:"Not enough bytes"}}}function fu(e){const t=[];let r;for(let n=0;n<e.length;++n){const i=e[n].toLowerCase();if(i>="0"&&i<="9"||i>="a"&&i<="f"){const s=parseInt(i,16);r===void 0?r=s:(t.push(r<<4|s),r=void 0)}}return r!==void 0&&t.push(r),t}var cu=Xe("<li> </li>"),du=Xe('<li><div class="instruction"><span> </span> <!></div></li>'),vu=Xe('<div id="logo"></div> <!> <div class="push-right"><!></div> <input placeholder="Assembly" type="text"> <div id="errors"><ul></ul></div> <div id="instructions"><ul></ul></div>',1);function hu(e,t){$t(t,!0);let r=ot("0f 01 15 d6 00 10 00"),n=ot(!0),i=ot(!0);function s(E,b){let{instr:R,errors:w}=Ns(E,b),T=R?xs(R,b):[];return{errors:w,instructions:T}}function u(E,b){return Ks(b,E)}function c(){return A(i)?u(A(r),A(n)):s(A(r),A(n))}let l=xe(c);var a=vu(),o=J(Kn(a),2);br(o,{leftLabel:"Encode",rightLabel:"Decode",get value(){return A(i)},set value(E){z(i,te(E))}});var f=J(o,2),d=G(f);br(d,{leftLabel:"16bits",rightLabel:"32bits",get value(){return A(n)},set value(E){z(n,te(E))}});var g=J(f,2),S=J(g,2),O=G(S);nr(O,21,()=>A(l).errors,rr,(E,b)=>{var R=cu(),w=G(R);gt(()=>et(w,A(b).msg)),Ne(E,R)});var M=J(S,2),p=G(M);nr(p,21,()=>A(l).instructions,rr,(E,b)=>{var R=du(),w=G(R),T=G(w),x=G(T),k=J(T,2);Oi(k,()=>A(b).encoding,C=>{Is(C,{get encoding(){return A(b).encoding}})}),gt(()=>et(x,A(b).name)),Ne(E,R)}),Ii(g,()=>A(r),E=>z(r,E)),Ne(e,a),Ut()}yi(hu,{target:document.getElementById("app")});
